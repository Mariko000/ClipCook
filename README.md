# 🍳 ClipCook
### **海外レシピの「計量の壁」を技術で解決する、日・英・米対応レシピSNS**

ClipCookは、海外レシピ特有の単位（cup, oz, lb等）や、地域による容量差（US/UK/JP）を自動吸収し、誰でも正確に調理できるようにサポートするレシピ管理・SNSプラットフォームです。

---

## 🚀 アプリ全体構成

### **1. Quantify（レシピ・カスタマイザー）**
* **単位変換機能**: 日英米レシピの双方向変換（外国単位 ↔ 日本単位）。
* **材料連動型・自動倍率計算**: 1つの材料を変えると、レシピ全体の分量を自動調整（例: 1人前 ↔ 4人前）。

### **2. Timeline（TikTok風SNS）**
* **スワイプUI**: 写真付きレシピを直感的にブラウズ。
* **シームレス連携**: タイムラインからワンタップでQuantify（分量調整）へ移行可能。
* **ソーシャル機能**: フォロー、チャット、ブックマーク機能。

---

## 🧠 技術的なこだわり & ロジック解説

### **① 倍率計算（フロントエンド完結型）**


ユーザーの入力負荷を減らしつつ、正確な数値を維持するロジックをVue.jsで実装。
* **入力値の保持 (`handleInput`)**: 
    入力を数値変換し、`originalQuantities`（初期入力値）として保持。
* **比率の算出 (`applyScaling`)**: 
    基準材料の変更値をトリガーに全体比率（Ratio）を算出。
* **一括再計算**: 
    `Original × Ratio` により全材料を再計算。**Source of Truth（初期値）**を常に参照することで、浮動小数点誤差の蓄積を防止。
* **通知 (`emit`)**: 
    再計算結果を親コンポーネントへ通知し、リアルタイムに表示を更新。

### **② 食材単位変換機能（バックエンド・API）**


非定型なテキストレシピを構造化し、計量の整合性を担保するDjangoロジック。
1.  **テキスト解析**: 
    Unicode分数（½）、混合数（1 1/2）、範囲平均化（1–2 → 1.5）の数値化処理。
2.  **正規化**: 
    `UNIT_ALIASES` による単位抽出と、`synonyms統合` による食材名の揺れ（小麦粉/薄力粉など）の統一。
3.  **高精度換算**: 
    `conversion_data.py` の換算辞書を参照。液体は容積、固体は重量として扱い、**食材固有の密度**を優先適用。
4.  **丸め処理**: 
    調理のしやすさを考慮し、1/2 cup表記の復元や、100g以上の整数化処理を実施。

---

## ⚠️ 課題と解決方法

| 課題 | 解決方法 |
| :--- | :--- |
| **計量の不整合** (cup/oz/lb) | NIST(米)・NPL(英)準拠の単位系選択機能を実装。 |
| **手動計算エラー** | 密度換算辞書による自動計算でヒューマンエラーを排除。 |
| **再計算コストの増大** | `Original × Ratio` 設計により、何度でも正確に一括再計算が可能。 |

---

## 🛠 技術スタック
- **Frontend**: `Vue.js 3`, `Pinia`, `PWA`
- **Backend**: `Django`, `Django Rest Framework`
- **Logic**: 自作食材密度換算エンジン (`Python`)
- **Data Source**: NIST, NPL, 文部科学省「日本食品標準成分表」

---

## 📈 今後の展望（Roadmap）
- [ ] **AI加熱調理アドバイザー**: 総重量からオーブンの焼き時間・温度を算出。
- [ ] **ビジュアル・パントリー**: 外国食材の「外箱写真」紐付けとコストコ等の店舗連携。
- [ ] **AIレシピ生成**: ターゲットに合わせた構成案の自動生成。

---

## 🔧 セットアップ
### **Backend**
```bash
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python manage.py migrate
